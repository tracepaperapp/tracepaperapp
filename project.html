<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Tracepaper Tool" />
    <title>Project</title>
    <link rel="icon" type="image/x-icon" href="/assets/draftsman-logo.png" />
    <script src="/js/configuration.js"></script>
    <script src="/js/draftsman.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css"
          integrity="sha512-SbiR/eusphKoMVVXysTKG/7VseWii+Y3FdHrt0EpKgpToZeemhqHeZeLWLhJutz/2ut2Vw1uQEj2MbRF+TVBUA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" defer></script>
    <link rel="stylesheet" href="/css/customs.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="/js/custom-form.js"></script>
    <script src="/js/globals.js"></script>
</head>
<body class="d-flex flex-column h-100" x-data x-import="custom-navbar;
                                                        ">

<main class="flex-shrink-0"
      x-data="{project: $store.project.get, events: $store.events.filter.resultset}">

    <!-- Configure navbar -->
    <ui-navbar :path="[
        ['Home','/'],
        ['Workspace','/workspace?drn=' + get_drn(2)],
        [project.name,'/project?drn=' +get_drn(3)]
    ]"></ui-navbar>

    <!-- Import prepared query -->
    <draftsman-query alias="project" x-include="/prepared-statements/project/project.txt" authenticated>
    </draftsman-query>
    <div class="data-element" @refresh="project = $store.project.get;console.log($store.project);" />

    <draftsman-query alias="events" x-include="/prepared-statements/project/events.txt" authenticated>
    </draftsman-query>
    <div class="data-element" @refresh="events = $store.events.filter.resultset" />

    <!-- Page Body -->
    <div class="container">
        <h1>Project: <span x-text="project.name"></span></h1>
        <hr>
        <div class="row">
            <div class="col-2">
                <div class="list-group">
                    <a href="#" class="list-group-item list-group-item-action disabled" aria-current="true">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Domain</h5>
                        </div>
                    </a>
                    <a x-bind:href="'/commands?drn=' + project.drn" class="list-group-item list-group-item-action" href="/commands?drn=D1562559209:personal:Demo">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Commands</h5>
                            <small class="text-muted" x-html="project.commands.length">3</small>
                        </div>
                        <small class="text-muted">A command is an action resulting in an event.</small>
                    </a>
                    <a x-bind:href="'/domain?drn=' + project.drn" class="list-group-item list-group-item-action" href="/domain?drn=D1562559209:personal:Demo">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Subdomains</h5>
                            <small class="text-muted" x-html="project.domains.length">1</small>
                        </div>
                        <small class="text-muted">A subdomain is a collection of aggregates.</small>
                    </a>
                    <a x-bind:href="'/views?drn=' + project.drn" class="list-group-item list-group-item-action" href="/views?drn=D1562559209:personal:Demo">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Views</h5>
                            <small class="text-muted" x-html="project.views.length">1</small>
                        </div>
                        <small class="text-muted">A view is a pre-rendered collection of data.</small>
                    </a>
                    <a x-bind:href="'/notifiers?drn=' + project.drn" class="list-group-item list-group-item-action" href="/notifiers?drn=D1562559209:personal:Demo">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Notifiers</h5>
                            <small class="text-muted" x-html="project.notifiers.length">1</small>
                        </div>
                        <small class="text-muted">A notifier is used to model if-this-then-that relations.</small>
                    </a>
                    <a x-bind:href="'/global-overview?drn=' + project.drn" class="list-group-item list-group-item-action" href="/global-overview?drn=D1562559209:personal:Demo">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Globals</h5>
                            <small class="text-muted" x-html="project.globalComponents.length">1</small>
                        </div>
                        <small class="text-muted">A global is a reusable component e.g. decision model, custom code, regular expression etc.</small>
                    </a>
                    <a x-bind:href="'/events?drn=' + project.drn" class="list-group-item list-group-item-action" href="/events?drn=D1562559209:personal:Demo">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Event Registry</h5>
                            <small class="text-muted" x-html="events.length">6</small>
                        </div>
                        <small class="text-muted">An overview of al events in the domain.</small>
                    </a>
                </div>
            </div>
            <div class="col-1"></div>
            <div class="col-6">
                <div x-html="convert_to_html(project.documentation)"></div>
            </div>
            <div class="col-1"></div>
            <div class="col-2"></div>
        </div>
        <br>
    </div>

</main>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
</html>
