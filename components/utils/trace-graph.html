<template x-component="trace-graph">
    <div>
        <template :x-target="$prop('target')">
            <div class="row" x-show="$store.trace.length != 0" x-cloak x-data="{id: 'traceGraph'+$prop('target').replaceAll('#','')}">

                <div class="col-6" x-effect="update_trace_diagram($store.trace,id)">
                    <div :id="id" width="100%" height="600px"></div>
                </div>
                <div class="col-6">
                    <div class="list-group" :id="'log'+id">
                        <template x-for="message in $store.trace">
                            <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1" x-html="message.command != '' ? message.command : message.event"></h5>
                                    <small x-html="message.status"></small>
                                </div>
                                <p class="mb-1" x-html="message.message"></p>
                                <small x-html="message.timestamp.replace('Z','').replace('T',' ')"></small>
                            </a>
                        </template>
                    </div>
                </div>
            </div>
        </template>
        <script src="/js/trace-graph.js"></script>
    </div>
</template>